<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 180" role="img" aria-label="GitHub activity circuit board showing {{ total }} contributions">
  <title>Activity Circuit - {{ total }} contributions</title>
  <defs>
    <style>
      /* Dracula Theme */
      :root {
        --bg: #282a36;
        --fg: #f8f8f2;
        --accent: #ff79c6;
        --comment: #6272a4;
        --green: #50fa7b;
        --purple: #bd93f9;
        --cyan: #8be9fd;
      }

      .circuit-bg {
        fill: var(--bg);
      }

      .circuit-border {
        fill: none;
        stroke: var(--comment);
        stroke-width: 1;
      }

      .title {
        fill: var(--accent);
        font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
        font-size: 12px;
        font-weight: bold;
      }

      .total {
        fill: var(--green);
        font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
        font-size: 14px;
        font-weight: bold;
      }

      .label {
        fill: var(--comment);
        font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
        font-size: 10px;
      }

      /* Circuit traces */
      .trace {
        stroke: #44475a;
        stroke-width: 1;
        fill: none;
      }

      .trace-active {
        stroke: var(--purple);
        stroke-width: 1;
        fill: none;
        opacity: 0.5;
      }

      /* Node levels */
      .node-0 { fill: #44475a; }
      .node-1 { fill: #6272a4; }
      .node-2 { fill: var(--purple); }
      .node-3 { fill: var(--cyan); }
      .node-4 { fill: var(--green); }

      /* Glow effect for active nodes */
      .node-glow {
        filter: drop-shadow(0 0 3px currentColor);
      }

      /* Pulse animation for high-activity nodes */
      .pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
      }

      .unavailable {
        fill: var(--comment);
        font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
        font-size: 12px;
        font-style: italic;
      }

      /* Light mode */
      @media (prefers-color-scheme: light) {
        .circuit-bg { fill: #f5f5f5; }
        .node-0 { fill: #e0e0e0; }
        .node-1 { fill: #bdbdbd; }
        .trace { stroke: #e0e0e0; }
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .pulse {
          animation: none;
        }
      }
    </style>
  </defs>

  <!-- Background -->
  <rect class="circuit-bg" x="0" y="0" width="800" height="180" rx="8" ry="8"/>
  <rect class="circuit-border" x="0.5" y="0.5" width="799" height="179" rx="8" ry="8"/>

  <!-- Header -->
  <text class="title" x="15" y="24">// activity_circuit</text>
  <text class="total" x="785" y="24" text-anchor="end">{{ total }} commits</text>

  {% if status == "ok" and nodes %}
  <!-- Circuit Grid -->
  <g transform="translate(30, 40)">
    <!-- Horizontal traces -->
    {% for day in range(7) %}
    <line class="trace" x1="0" y1="{{ day * 18 + 5 }}" x2="740" y2="{{ day * 18 + 5 }}"/>
    {% endfor %}

    <!-- Vertical traces -->
    {% for week in range(weeks_count) %}
    <line class="trace" x1="{{ week * 62 + 5 }}" y1="0" x2="{{ week * 62 + 5 }}" y2="126"/>
    {% endfor %}

    <!-- Day labels -->
    <text class="label" x="-5" y="8" text-anchor="end">S</text>
    <text class="label" x="-5" y="26" text-anchor="end">M</text>
    <text class="label" x="-5" y="44" text-anchor="end">T</text>
    <text class="label" x="-5" y="62" text-anchor="end">W</text>
    <text class="label" x="-5" y="80" text-anchor="end">T</text>
    <text class="label" x="-5" y="98" text-anchor="end">F</text>
    <text class="label" x="-5" y="116" text-anchor="end">S</text>

    <!-- Nodes -->
    {% for node in nodes %}
    <g transform="translate({{ node.week * 62 }}, {{ node.weekday * 18 }})">
      {% if node.level >= 3 %}
      <rect class="node-{{ node.level }} node-glow pulse" x="0" y="0" width="12" height="12" rx="2"/>
      {% else %}
      <rect class="node-{{ node.level }}" x="0" y="0" width="12" height="12" rx="2"/>
      {% endif %}
      {% if node.level > 0 %}
      <!-- Connection points -->
      <circle class="node-{{ node.level }}" cx="6" cy="-3" r="1.5"/>
      <circle class="node-{{ node.level }}" cx="6" cy="15" r="1.5"/>
      {% endif %}
    </g>
    {% endfor %}
  </g>

  <!-- Legend -->
  <g transform="translate(670, 165)">
    <text class="label" x="0" y="0">less</text>
    <rect class="node-0" x="28" y="-8" width="12" height="12" rx="2"/>
    <rect class="node-1" x="44" y="-8" width="12" height="12" rx="2"/>
    <rect class="node-2" x="60" y="-8" width="12" height="12" rx="2"/>
    <rect class="node-3" x="76" y="-8" width="12" height="12" rx="2"/>
    <rect class="node-4" x="92" y="-8" width="12" height="12" rx="2"/>
    <text class="label" x="110" y="0">more</text>
  </g>
  {% else %}
  <!-- Unavailable State -->
  <text class="unavailable" x="400" y="90" text-anchor="middle">// activity data unavailable</text>
  <text class="unavailable" x="400" y="110" text-anchor="middle">// check GITHUB_TOKEN</text>
  {% endif %}
</svg>
